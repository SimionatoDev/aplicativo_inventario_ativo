"use strict";(self.webpackChunkinventario=self.webpackChunkinventario||[]).push([[562],{2562:(_e,y,i)=>{i.r(y),i.d(y,{NfeModule:()=>ge});var Z=i(8583),h=i(4655),g=i(9243),T=i(2653);class x{constructor(){this.id_empresa=0,this.id_filial=0,this.cnpj_fornecedor="",this.razao_fornecedor="",this.id_imobilizado=0,this.nfe="",this.serie="",this.chavee="",this.pagina=0,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}var Y=i(5062),p=i(3032),A=i(3430),s=i(6809),e=i(7716),m=i(3679),I=i(3317),j=i(6767),D=i(5626),J=i(789),V=i(2522),k=i(3968),w=i(1095),B=i(1436),z=i(6627),_=i(8295),L=i(7441),E=i(9983),R=i(2458),M=i(7234);function G(o,n){if(1&o&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&o){const a=n.$implicit;e.Q6J("value",a),e.xp6(1),e.hij(" ",a," ")}}function $(o,n){if(1&o&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&o){const a=n.$implicit;e.Q6J("value",a),e.xp6(1),e.hij(" ",a," ")}}function K(o,n){if(1&o){const a=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"div"),e.TgZ(3,"mat-label",19),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div"),e.TgZ(6,"mat-label",19),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"td"),e.TgZ(9,"div"),e.TgZ(10,"mat-label",19),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"td"),e.TgZ(13,"div"),e.TgZ(14,"mat-label",19),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"td"),e.TgZ(17,"div"),e.TgZ(18,"mat-label",19),e._uU(19),e.qZA(),e.qZA(),e.TgZ(20,"div"),e.TgZ(21,"mat-label",19),e._uU(22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"td"),e.TgZ(24,"div"),e.TgZ(25,"mat-label",19),e._uU(26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"td"),e.TgZ(28,"div"),e.TgZ(29,"mat-label",19),e._uU(30),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"td"),e.TgZ(32,"div"),e.TgZ(33,"mat-label",19),e._uU(34),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"td",20),e.TgZ(36,"barra-acoes",21),e.NdJ("changeOpcao",function(r){const c=e.CHM(a).$implicit;return e.oxw().escolha(r,c)}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const a=n.$implicit;e.xp6(4),e.AsE("",a.id_imobilizado,"-",a.imo_descricao,""),e.xp6(3),e.Oqu(a.for_razao),e.xp6(4),e.Oqu(a.nfe),e.xp6(4),e.Oqu(a.serie),e.xp6(4),e.Oqu(a.dtemissao),e.xp6(3),e.Oqu(a.dtlancamento),e.xp6(4),e.Oqu(a.qtd),e.xp6(4),e.Oqu(a.punit),e.xp6(4),e.Oqu(a.totalitem),e.xp6(2),e.Q6J("BARRA_VERTICAL",!0)("BARRA_ATIVIDADES",!1)("EXCLUIR",!1)}}let F=(()=>{class o{constructor(a,t,r,l,c,f,d,u){this.formBuilder=a,this.globalService=t,this.nfeService=r,this.parametrosService=l,this.router=c,this.appSnackBar=f,this.route=d,this.ngZone=u,this.nfes=[],this.erro="",this.opcoesOrdenacao=[],this.opcoesCampo=[],this.tamPagina=50,this.controlePaginas=new A.e(this.tamPagina,0),this.retorno=!1,this.parametro=new T.M,this.parametros=a.group({ordenacao:[null],campo:[null],filtro:[null],grupo:[]}),this.inscricaoRota=d.params.subscribe(v=>{void 0===v.retorno?this.retorno=!1:(this.retorno=!0,this.globalService.estadoFind("nfe"))}),this.loadParametros()}ngOnInit(){}ngOnDestroy(){var a,t,r,l,c;null===(a=this.inscricaoGetAll)||void 0===a||a.unsubscribe(),null===(t=this.inscricaoGetFiltro)||void 0===t||t.unsubscribe(),null===(r=this.inscricaoGetGrupo)||void 0===r||r.unsubscribe(),null===(l=this.inscricaoRota)||void 0===l||l.unsubscribe(),null===(c=this.inscricaoParametro)||void 0===c||c.unsubscribe()}escolha(a,t){if(void 0!==t){let r=this.parametro.getParametro();Object(r).new=!1,Object(r).id_retorno=t.nfe,Object(r).page=this.controlePaginas.getPaginalAtual(),Object(r).op_ordenacao=this.opcoesOrdenacao.findIndex(l=>this.parametros.value.ordenacao==l),Object(r).op_pesquisar=this.opcoesCampo.findIndex(l=>this.parametros.value.campo==l),Object(r).descricao=this.parametros.value.filtro,this.parametro.parametro=JSON.stringify(r),this.globalService.estadoSave(this.parametro),this.router.navigate(["/nfes/nfe",t.id_empresa,t.id_filial,t.cnpj_fornecedor,t.razao_fornecedor,t.id_imobilizado,t.nfe,t.serie,t.item,a])}else{let r=this.parametro.getParametro();Object(r).new=!1,Object(r).id_retorno=0,Object(r).page=this.controlePaginas.getPaginalAtual(),Object(r).op_ordenacao=this.opcoesOrdenacao.findIndex(l=>this.parametros.value.ordenacao==l),Object(r).op_pesquisar=this.opcoesCampo.findIndex(l=>this.parametros.value.campo==l),Object(r).descricao=this.parametros.value.filtro,this.parametro.parametro=JSON.stringify(r),this.globalService.estadoSave(this.parametro),this.router.navigate(["/nfes/nfe",this.globalService.getEmpresa().id,this.globalService.getLocal().id,0,0,0,0,0,a])}}getAcoes(){return p.I}setValues(){this.parametros.setValue({ordenacao:this.opcoesOrdenacao[(0,s.P0)(this.parametro.getParametro(),"op_ordenacao")],campo:this.opcoesCampo[(0,s.P0)(this.parametro.getParametro(),"op_pesquisar")],filtro:(0,s.SL)(this.parametro.getParametro(),"descricao"),grupo:1})}getNfes(){let a=new x;a.id_empresa=this.globalService.getEmpresa().id,a.id_filial=this.globalService.getLocal().id,"Nfe"==this.parametros.value.campo&&""!=this.parametros.value.filtro&&(a.nfe=this.parametros.value.filtro),a.orderby=this.parametros.value.ordenacao,a.pagina=this.controlePaginas.getPaginalAtual(),a.contador="N",a.tamPagina=this.tamPagina,this.globalService.setSpin(!0),this.inscricaoGetFiltro=this.nfeService.getNfesParametro_01(a).subscribe(t=>{this.globalService.setSpin(!1),this.nfes=[],this.nfes=t;const r=this.nfes.findIndex(c=>c.nfe==(0,s.SL)(this.parametro.getParametro(),"id_retorno"));setTimeout(()=>this.viewPort.scrollToIndex(r),10),this.retorno=!1;let l=this.parametro.getParametro();Object(l).id_retorno=0,Object(l).new=!1,this.parametro.parametro=JSON.stringify(l)},t=>{console.log(t);let r=this.parametro.getParametro();Object(r).id_retorno=0,Object(r).new=!1,this.retorno=!1,this.globalService.setSpin(!1),this.nfes=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nas NFES ${(0,s.bZ)(t)}`,"OK")})}getNfesContador(){let a=new x;a.id_empresa=this.globalService.getEmpresa().id,a.id_filial=this.globalService.getLocal().id,"Nfe"==this.parametros.value.campo&&""!=this.parametros.value.filtro&&(a.nfe=this.parametros.value.filtro),a.sharp=!0,a.orderby=this.parametros.value.ordenacao,a.contador="S",a.tamPagina=this.tamPagina,this.globalService.setSpin(!0),this.inscricaoGetFiltro=this.nfeService.getNfesParametro_01(a).subscribe(t=>{if(this.globalService.setSpin(!1),this.controlePaginas=new A.e(this.tamPagina,0==t.total?1:t.total),this.retorno)if((0,s.xc)(this.parametro.getParametro(),"new"))this.controlePaginas.goLast();else{let r=this.parametro.getParametro();this.controlePaginas.setPaginaAtual(Object(r).page)}this.getNfes()},t=>{console.log(t),this.globalService.setSpin(!1),this.controlePaginas=new A.e(this.tamPagina,0),this.appSnackBar.openFailureSnackBar(`Pesquisa Nas NFES ${(0,s.bZ)(t)}`,"OK")})}getTexto(){return s.fd}onChangePage(){this.getNfes()}onChangeParametros(){this.getNfesContador()}onHome(){this.router.navigate([""])}onSaveConfig(){this.updateParametros()}loadParametros(){if(this.parametro=new T.M,this.parametro.id_empresa=this.globalService.getIdEmpresa(),this.parametro.modulo="nfe",this.parametro.assinatura="V1.00 26/08/23",this.parametro.id_usuario=this.globalService.usuario.id,this.parametro.parametro='\n      {\n        "op_ordenacao": 0,\n        "ordenacao": ["Nfe"],\n        "op_pesquisar": 0,\n        "pesquisar": ["Nfe"],\n        "descricao": "",\n        "page": 1,\n        "new": false,\n        "id_retorno":""\n      }',this.opcoesOrdenacao=(0,s.FO)(this.parametro.getParametro(),"ordenacao"),this.opcoesCampo=(0,s.FO)(this.parametro.getParametro(),"pesquisar"),this.retorno&&null!==this.globalService.estadoFind("nfe")){const a=this.globalService.estadoFind("nfe");if(null!=a){if((0,s.xc)(a.getParametro(),"new")){let t=this.parametro.getParametro();Object(t).id_retorno=(0,s.P0)(a.getParametro(),"id_retorno"),this.parametro.parametro=JSON.stringify(t),this.setPosicaoInclusao()}else this.controlePaginas.setPaginaAtual((0,s.P0)(a.getParametro(),"page")),this.parametro.setParametro(a.getParametro());this.globalService.estadoDelete(a),this.setValues(),this.getNfesContador()}}else this.getParametro()}setPosicaoInclusao(){const a=this.parametro.getParametro();Object(a).op_ordenacao=0,Object(a).op_pesquisar=0,Object(a).descricao="",Object(a).new=!0,this.parametro.setParametro(a)}getParametro(){this.globalService.setSpin(!0);let a=new Y.E;a.id_empresa=this.parametro.id_empresa,a.modulo=this.parametro.modulo,a.assinatura=this.parametro.assinatura,a.id_usuario=this.parametro.id_usuario,a.orderby="Usu\xe1rio",this.inscricaoParametro=this.parametrosService.getParametrosParametro01(a).subscribe(t=>{this.globalService.setSpin(!1),this.parametro=new T.M,this.parametro.id_empresa=t[0].id_empresa,this.parametro.modulo=t[0].modulo,this.parametro.id_usuario=t[0].id_usuario,this.parametro.assinatura=t[0].assinatura,this.parametro.parametro=t[0].parametro,this.parametro.user_insert=t[0].user_insert,this.parametro.user_update=t[0].user_update,this.opcoesOrdenacao=(0,s.FO)(this.parametro.getParametro(),"ordenacao"),this.opcoesCampo=(0,s.FO)(this.parametro.getParametro(),"pesquisar"),this.setValues(),this.getNfesContador()},t=>{this.globalService.setSpin(!1),this.setValues(),this.getNfesContador()})}updateParametros(){this.globalService.setSpin(!0),this.parametro.user_insert=this.globalService.usuario.id,this.parametro.user_update=this.globalService.usuario.id;let a=this.parametro.getParametro();Object(a).op_ordenacao=this.opcoesOrdenacao.findIndex(t=>this.parametros.value.ordenacao==t),Object(a).op_pesquisar=this.opcoesCampo.findIndex(t=>this.parametros.value.campo==t),Object(a).descricao=this.parametros.value.filtro,Object(a).page=0,Object(a).new=!1,this.parametro.parametro=JSON.stringify(a),this.inscricaoParametro=this.parametrosService.ParametroAtualiza(this.parametro).subscribe(t=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar("Par\xe2metros Atualizados","OK")},t=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Grava\xe7\xe3o Dos Parametros ${(0,s.bZ)(t)}`,"OK")})}}return o.\u0275fac=function(a){return new(a||o)(e.Y36(m.qu),e.Y36(I.U),e.Y36(j._),e.Y36(D.u),e.Y36(h.F0),e.Y36(J.W),e.Y36(h.gz),e.Y36(e.R0b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-crud-nfe"]],viewQuery:function(a,t){if(1&a&&e.Gf(g.N7,5),2&a){let r;e.iGM(r=e.CRH())&&(t.viewPort=r.first)}},decls:53,vars:7,consts:[[1,"div-barra"],[1,"example-spacer"],[3,"controle","changePage"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Atualizar","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Salvar Par\xe2metros","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Retorno","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above",3,"matTooltip","click"],["autocomplete","off",1,"col-med-4",3,"formGroup"],["field","","appearance","outline",1,"col-max"],["formControlName","ordenacao",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","campo",3,"selectionChange"],["appearance","outline",1,"col-max","column-span-2"],["matInput","","formControlName","filtro","oninput","this.value = this.value.toUpperCase()"],[1,"content",3,"itemSize"],[1,"Browse_Lanc"],[1,"coluna-cabec"],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"value"],[1,"Browse_Lanc_td"],[1,"acoes"],[3,"BARRA_VERTICAL","BARRA_ATIVIDADES","EXCLUIR","changeOpcao"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"mat-toolbar"),e.TgZ(2,"span",1),e._uU(3,"NFES:"),e.qZA(),e.TgZ(4,"app-navegator",2),e.NdJ("changePage",function(){return t.onChangePage()}),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return t.getNfesContador()}),e.TgZ(6,"mat-icon"),e._uU(7,"rotate_right"),e.qZA(),e.qZA(),e.TgZ(8,"button",4),e.NdJ("click",function(){return t.onSaveConfig()}),e.TgZ(9,"mat-icon"),e._uU(10,"brightness_high"),e.qZA(),e.qZA(),e.TgZ(11,"button",5),e.NdJ("click",function(){return t.onHome()}),e.TgZ(12,"mat-icon"),e._uU(13,"home"),e.qZA(),e.qZA(),e.TgZ(14,"button",6),e.NdJ("click",function(){return t.escolha(t.getAcoes().Inclusao)}),e.TgZ(15,"mat-icon"),e._uU(16,"add_circle_outline"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div"),e.TgZ(18,"form",7),e.TgZ(19,"mat-form-field",8),e.TgZ(20,"mat-label"),e._uU(21,"Ordena\xe7\xe3o"),e.qZA(),e.TgZ(22,"mat-select",9),e.NdJ("selectionChange",function(){return t.onChangeParametros()}),e.YNc(23,G,2,2,"mat-option",10),e.qZA(),e.qZA(),e.TgZ(24,"mat-form-field",8),e.TgZ(25,"mat-label"),e._uU(26,"Pesquisar Por"),e.qZA(),e.TgZ(27,"mat-select",11),e.NdJ("selectionChange",function(){return t.onChangeParametros()}),e.YNc(28,$,2,2,"mat-option",10),e.qZA(),e.qZA(),e.TgZ(29,"mat-form-field",12),e.TgZ(30,"mat-label"),e._uU(31,"Descri\xe7\xe3o"),e.qZA(),e._UZ(32,"input",13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"cdk-virtual-scroll-viewport",14),e.TgZ(34,"table",15),e.TgZ(35,"tr",16),e.TgZ(36,"th"),e._uU(37,"Imobilizado/Fornecedor"),e.qZA(),e.TgZ(38,"th"),e._uU(39,"Nro"),e.qZA(),e.TgZ(40,"th"),e._uU(41,"S\xe9rie"),e.qZA(),e.TgZ(42,"th"),e._uU(43,"Em./Lan\xe7."),e.qZA(),e.TgZ(44,"th"),e._uU(45,"Qtd"),e.qZA(),e.TgZ(46,"th"),e._uU(47,"P.Unit."),e.qZA(),e.TgZ(48,"th"),e._uU(49,"Total"),e.qZA(),e.TgZ(50,"th"),e._uU(51,"A\xc7\xd5ES"),e.qZA(),e.qZA(),e.YNc(52,K,37,13,"tr",17),e.qZA(),e.qZA()),2&a&&(e.xp6(4),e.Q6J("controle",t.controlePaginas),e.xp6(10),e.Q6J("matTooltip",t.getTexto().incluir),e.xp6(4),e.Q6J("formGroup",t.parametros),e.xp6(5),e.Q6J("ngForOf",t.opcoesOrdenacao),e.xp6(5),e.Q6J("ngForOf",t.opcoesCampo),e.xp6(5),e.Q6J("itemSize",50),e.xp6(19),e.Q6J("cdkVirtualForOf",t.nfes))},directives:[V.Ye,k.J,w.lW,B.gM,z.Hw,m._Y,m.JL,m.sg,_.KE,_.hX,L.gD,m.JJ,m.u,Z.sg,E.Nt,m.Fj,g.N7,g.xd,g.x0,R.ey,M.C],styles:[".content[_ngcontent-%COMP%]{height:60%;overflow:auto}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2aa}tr[_ngcontent-%COMP%]:hover{background-color:#caa99d}"]}),o})();var C=i(8239),S=i(7505);class H{constructor(){this.id_empresa=0,this.id_filial=0,this.cnpj_fornecedor="",this.razao_fornecedor="",this.id_imobilizado=0,this.nfe="",this.serie="",this.item=""}}var Q=i(8981);function X(o,n){if(1&o){const a=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){return e.CHM(a),e.oxw().onSubmit()}),e.TgZ(1,"mat-icon"),e._uU(2,"check"),e.qZA(),e._uU(3),e.qZA()}if(2&o){const a=e.oxw();e.xp6(3),e.hij(" ",a.acao," ")}}function W(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const a=e.oxw();let t;e.xp6(1),e.hij(" ",null==(t=a.formulario.get("dtemissao"))||null==t.errors?null:t.errors.message,"")}}function ee(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const a=e.oxw();let t;e.xp6(1),e.hij(" ",null==(t=a.formulario.get("dtlancamento"))||null==t.errors?null:t.errors.message,"")}}function te(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const a=e.oxw();let t;e.xp6(1),e.hij(" ",null==(t=a.formulario.get("nfe"))||null==t.errors?null:t.errors.message,"")}}function ae(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const a=e.oxw();let t;e.xp6(1),e.hij(" ",null==(t=a.formulario.get("serie"))||null==t.errors?null:t.errors.message,"")}}function oe(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const a=e.oxw();let t;e.xp6(1),e.hij(" ",null==(t=a.formulario.get("item"))||null==t.errors?null:t.errors.message,"")}}function re(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const a=e.oxw();let t;e.xp6(1),e.hij(" ",null==(t=a.formulario.get("chavee"))||null==t.errors?null:t.errors.message,"")}}function ie(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const a=e.oxw();let t;e.xp6(1),e.hij(" ",null==(t=a.formulario.get("qtd"))||null==t.errors?null:t.errors.message,"")}}function ne(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const a=e.oxw();let t;e.xp6(1),e.hij(" ",null==(t=a.formulario.get("punit"))||null==t.errors?null:t.errors.message,"")}}function le(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const a=e.oxw();let t;e.xp6(1),e.hij(" ",null==(t=a.formulario.get("totalitem"))||null==t.errors?null:t.errors.message,"")}}function se(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const a=e.oxw();let t;e.xp6(1),e.hij(" ",null==(t=a.formulario.get("vlrcontabil"))||null==t.errors?null:t.errors.message,"")}}function me(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const a=e.oxw();let t;e.xp6(1),e.hij(" ",null==(t=a.formulario.get("baseicms"))||null==t.errors?null:t.errors.message,"")}}function ue(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const a=e.oxw();let t;e.xp6(1),e.hij(" ",null==(t=a.formulario.get("percicms"))||null==t.errors?null:t.errors.message,"")}}function ce(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const a=e.oxw();let t;e.xp6(1),e.hij(" ",null==(t=a.formulario.get("vlrcicms"))||null==t.errors?null:t.errors.message,"")}}const pe=[{path:"",redirectTo:"nfes",pathMatch:"full"},{path:"nfes",component:F},{path:"nfes/:retorno",component:F},{path:"nfe/:id_empresa/:id_filial/:cnpj_fornecedor/:razao_fornecedor/:id_imobilizado/:nfe/:serie/:item/:acao",component:(()=>{class o{constructor(a,t,r,l,c,f,d){this.formBuilder=a,this.nfeService=t,this.route=r,this.router=l,this.appSnackBar=c,this.globalService=f,this.decimalPipe=d,this.nfe=new S.$,this.acao="Sem Defini\xe7\xe3o",this.idAcao=p.I.Inclusao,this.readOnly=!0,this.labelCadastro="",this.formulario=a.group({cnpj_fornecedor:[{value:""}],razao_fornecedor:[{value:""}],id_imobilizado:[{value:""}],imo_descricao:[{value:""}],nfe:[{value:""}],serie:[{value:""}],item:[{value:""}],dtemissao:[{value:""}],dtlancamento:[{value:""}],chavee:[{value:""}],qtd:[{value:""}],punit:[{value:""}],totalitem:[{value:""}],vlrcontabil:[{value:""}],baseicms:[{value:""}],percicms:[{value:""}],vlrcicms:[{value:""}]}),this.nfe=new S.$,this.inscricaoRota=r.params.subscribe(u=>{this.nfe.id_empresa=u.id_empresa,this.nfe.id_filial=u.id_filial,this.nfe.cnpj_fornecedor=u.cnpj_fornecedor,this.nfe.razao_fornecedor=u.razao_fornecedor,this.nfe.id_imobilizado=u.id_imobilizado,this.nfe.nfe=u.nfe,this.nfe.serie=u.serie,this.nfe.item=u.item,this.idAcao=u.acao,this.setAcao(u.acao)})}ngOnInit(){this.idAcao==p.I.Inclusao?(this.nfe=new S.$,this.nfe.id_empresa=this.globalService.getIdEmpresa(),this.nfe.id_filial=this.globalService.getLocal().id):this.getNfe(),this.setValue()}ngOnDestroy(){var a,t;null===(a=this.inscricaoRota)||void 0===a||a.unsubscribe(),null===(t=this.inscricaoAcao)||void 0===t||t.unsubscribe()}onSubmit(){this.formulario.valid?this.executaAcao():(this.formulario.markAllAsTouched(),this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK"))}onRetorno(){const a=this.globalService.estadoFind("imobilizado");if(null!=a){let t=a.getParametro();Object(t).new=this.idAcao==p.I.Inclusao,Object(t).id_retorno=this.nfe.id_imobilizado,a.parametro=JSON.stringify(t),this.globalService.estadoSave(a)}this.router.navigate(["/nfes/nfe","SIM"])}onCancel(){const a=this.globalService.estadoFind("imobilizado");if(null!=a){let t=a.getParametro();Object(t).new=!1,Object(t).id_retorno=this.idAcao==p.I.Consulta?this.nfe.id_imobilizado:0,a.parametro=JSON.stringify(t),this.globalService.estadoSave(a)}this.router.navigate(["/nfes/nfe","SIM"])}getNfe(){this.globalService.setSpin(!0);const a=new H;a.id_empresa=this.nfe.id_empresa,a.id_filial=this.nfe.id_filial,a.cnpj_fornecedor=this.nfe.cnpj_fornecedor,a.razao_fornecedor=this.nfe.razao_fornecedor,a.id_imobilizado=this.nfe.id_imobilizado,a.nfe=this.nfe.nfe,a.serie=this.nfe.serie,a.item=this.nfe.item,this.inscricaoAcao=this.nfeService.getNfe(a).subscribe(t=>{this.globalService.setSpin(!1),this.nfe=t,this.setValue()},t=>{console.log(t),this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Nfes ${(0,s.bZ)(t)}`,"OK")})}setValue(){this.formulario.setValue({cnpj_fornecedor:this.nfe.cnpj_fornecedor,razao_fornecedor:this.nfe.razao_fornecedor,id_imobilizado:this.nfe.id_imobilizado,imo_descricao:this.nfe.imo_descricao,nfe:this.nfe.nfe,serie:this.nfe.serie,item:this.nfe.item,dtemissao:this.nfe.dtemissao,dtlancamento:this.nfe.dtlancamento,chavee:this.nfe.chavee,qtd:this.decimalPipe.transform(this.nfe.qtd,"1.2-2","pt"),punit:this.decimalPipe.transform(this.nfe.punit,"1.2-2","pt"),totalitem:this.decimalPipe.transform(this.nfe.totalitem,"1.2-2","pt"),vlrcontabil:this.decimalPipe.transform(this.nfe.vlrcontabil,"1.2-2","pt"),baseicms:this.decimalPipe.transform(this.nfe.vlrcontabil,"1.2-2","pt"),percicms:this.decimalPipe.transform(this.nfe.percicms,"1.2-2","pt"),vlrcicms:this.decimalPipe.transform(this.nfe.vlrcicms,"1.2-2","pt")})}getLabelCancel(){return this.idAcao==p.I.Consulta?"Voltar":"Cancelar"}setAcao(a){switch(+a){case p.I.Inclusao:this.acao="Gravar",this.labelCadastro="Nfes - Inclus\xe3o.",this.readOnly=!1;break;case p.I.Edicao:this.acao="Gravar",this.labelCadastro="Nfes - Altera\xe7\xe3o.",this.readOnly=!1;break;case p.I.Consulta:this.acao="Voltar",this.labelCadastro="Nfes - Consulta.",this.readOnly=!0;break;case p.I.Exclusao:this.acao="Excluir",this.labelCadastro="Nfes - Exclus\xe3o.",this.readOnly=!0}}executaAcao(){var a=this;switch(this.nfe.cnpj_fornecedor=this.formulario.value.cnpj_fornecedor,this.nfe.razao_fornecedor=this.formulario.value.razao_fornecedor,this.nfe.id_imobilizado=this.formulario.value.id_imobilizado,this.nfe.nfe=this.formulario.value.nfe,this.nfe.serie=this.formulario.value.serie,this.nfe.item=this.formulario.value.item,this.nfe.chavee=this.formulario.value.chavee,this.nfe.dtemissao=this.formulario.value.dtemissao,this.nfe.dtlancamento=this.formulario.value.dtlancamento,this.nfe.qtd=this.formulario.value.qtd,this.nfe.punit=this.formulario.value.punit,this.nfe.totalitem=this.formulario.value.totalitem,this.nfe.vlrcontabil=this.formulario.value.vlrcontabil,this.nfe.baseicms=this.formulario.value.baseicms,this.nfe.percicms=this.formulario.value.percicms,this.nfe.vlrcicms=this.formulario.value.vlrcicms,+this.idAcao){case p.I.Inclusao:this.nfe.user_insert=this.globalService.getUsuario().id,this.globalService.setSpin(!0),this.inscricaoAcao=this.nfeService.nfeInsert(this.nfe).subscribe(function(){var t=(0,C.Z)(function*(r){a.nfe.id_imobilizado=r.id_imobilizado,a.globalService.setSpin(!1),a.onRetorno()});return function(r){return t.apply(this,arguments)}}(),t=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Erro Na INclus\xe3o ${(0,s.bZ)(t)}`,"OK")});break;case p.I.Edicao:this.globalService.setSpin(!0),this.nfe.user_update=this.globalService.getUsuario().id,this.inscricaoAcao=this.nfeService.nfeUpdate(this.nfe).subscribe(function(){var t=(0,C.Z)(function*(r){a.globalService.setSpin(!1),a.onRetorno()});return function(r){return t.apply(this,arguments)}}(),t=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Erro Na Altera\xe7\xe3o ${(0,s.bZ)(t)}`,"OK")});break;case p.I.Exclusao:this.globalService.setSpin(!0),this.inscricaoAcao=this.nfeService.nfeDelete(this.nfe.id_empresa,this.nfe.id_filial,this.nfe.cnpj_fornecedor,this.nfe.razao_fornecedor,this.nfe.id_imobilizado,this.nfe.nfe,this.nfe.serie,this.nfe.item).subscribe(function(){var t=(0,C.Z)(function*(r){a.globalService.setSpin(!1),a.onRetorno()});return function(r){return t.apply(this,arguments)}}(),t=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar("Erro Na Exclus\xe3o $Mesage ","OK")})}}getAcoes(){return p.I}touchedOrDirty(a){var t,r;return!(!(null===(t=this.formulario.get(a))||void 0===t?void 0:t.touched)&&!(null===(r=this.formulario.get(a))||void 0===r?void 0:r.dirty))}NoValidtouchedOrDirty(a){var t,r,l;return!((null===(t=this.formulario.get(a))||void 0===t?void 0:t.valid)||!(null===(r=this.formulario.get(a))||void 0===r?void 0:r.touched)&&!(null===(l=this.formulario.get(a))||void 0===l?void 0:l.dirty))}getMensafield(a){var t,r;return null===(r=null===(t=this.formulario.get(a))||void 0===t?void 0:t.errors)||void 0===r?void 0:r.message}}return o.\u0275fac=function(a){return new(a||o)(e.Y36(m.qu),e.Y36(j._),e.Y36(h.gz),e.Y36(h.F0),e.Y36(J.W),e.Y36(I.U),e.Y36(Z.JJ))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-nfe-view"]],decls:99,vars:32,consts:[[1,"example-spacer"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-3"],["appearance","outline",1,"col-70"],["matInput","","formControlName","id_imobilizado"],["appearance","outline",1,"col-max","column-span-2"],["matInput","","formControlName","imo_descricao","oninput","this.value = this.value.toUpperCase()","autofocus","",3,"readonly"],["matInput","","formControlName","cnpj_fornecedor",3,"readonly"],["matInput","","formControlName","razao_fornecedor"],[1,"col-med-2"],["appearance","outline",1,"col-max"],["matInput","","formControlName","dtemissao","mask","00/00/0000","placeholder","21/11/1987",3,"readonly"],[4,"ngIf"],["matInput","","formControlName","dtlancamento","mask","00/00/0000","placeholder","21/11/1987",3,"readonly"],[1,"col-med-4"],["matInput","","formControlName","nfe",3,"readonly"],["matInput","","formControlName","serie","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","item","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","chavee","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","qtd","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","punit","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","totalitem","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","vlrcontabil","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","baseicms","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","percicms","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","vlrcicms","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["mat-raised-button","","color","primary",3,"click"]],template:function(a,t){if(1&a&&(e.TgZ(0,"p"),e.TgZ(1,"mat-toolbar"),e.TgZ(2,"span",0),e.TgZ(3,"mat-label"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",1),e.YNc(6,X,4,1,"button",2),e.TgZ(7,"button",3),e.NdJ("click",function(){return t.onCancel()}),e.TgZ(8,"mat-icon"),e._uU(9,"cancel"),e.qZA(),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"form",4),e.TgZ(12,"div",5),e.TgZ(13,"mat-form-field",6),e.TgZ(14,"mat-label"),e._uU(15,"C\xf3d Imobilizado"),e.qZA(),e._UZ(16,"input",7),e.qZA(),e.TgZ(17,"mat-form-field",8),e.TgZ(18,"mat-label"),e._uU(19,"Descri\xe7\xe3o"),e.qZA(),e._UZ(20,"input",9),e.qZA(),e.qZA(),e.TgZ(21,"div",5),e.TgZ(22,"mat-form-field",6),e.TgZ(23,"mat-label"),e._uU(24,"Cnpj Fornecedor"),e.qZA(),e._UZ(25,"input",10),e.qZA(),e.TgZ(26,"mat-form-field",8),e.TgZ(27,"mat-label"),e._uU(28,"Raz\xe3o Fornecedor"),e.qZA(),e._UZ(29,"input",11),e.qZA(),e.qZA(),e.TgZ(30,"div",12),e.TgZ(31,"mat-form-field",13),e.TgZ(32,"mat-label"),e._uU(33,"Data Emiss\xe3o"),e.qZA(),e._UZ(34,"input",14),e.YNc(35,W,2,1,"mat-error",15),e.qZA(),e.TgZ(36,"mat-form-field",13),e.TgZ(37,"mat-label"),e._uU(38,"Data Lan\xe7amento"),e.qZA(),e._UZ(39,"input",16),e.YNc(40,ee,2,1,"mat-error",15),e.qZA(),e.qZA(),e.TgZ(41,"div",17),e.TgZ(42,"mat-form-field",13),e.TgZ(43,"mat-label"),e._uU(44,"Nfe"),e.qZA(),e._UZ(45,"input",18),e.YNc(46,te,2,1,"mat-error",15),e.qZA(),e.TgZ(47,"mat-form-field",13),e.TgZ(48,"mat-label"),e._uU(49,"Serie"),e.qZA(),e._UZ(50,"input",19),e.YNc(51,ae,2,1,"mat-error",15),e.qZA(),e.TgZ(52,"mat-form-field",13),e.TgZ(53,"mat-label"),e._uU(54,"Item"),e.qZA(),e._UZ(55,"input",20),e.YNc(56,oe,2,1,"mat-error",15),e.qZA(),e.TgZ(57,"mat-form-field",13),e.TgZ(58,"mat-label"),e._uU(59,"Chave Eletr\xf4nica"),e.qZA(),e._UZ(60,"input",21),e.YNc(61,re,2,1,"mat-error",15),e.qZA(),e.qZA(),e.TgZ(62,"div",5),e.TgZ(63,"mat-form-field",13),e.TgZ(64,"mat-label"),e._uU(65,"Qtd"),e.qZA(),e._UZ(66,"input",22),e.YNc(67,ie,2,1,"mat-error",15),e.qZA(),e.TgZ(68,"mat-form-field",13),e.TgZ(69,"mat-label"),e._uU(70,"Pre\xe7o Unit."),e.qZA(),e._UZ(71,"input",23),e.YNc(72,ne,2,1,"mat-error",15),e.qZA(),e.TgZ(73,"mat-form-field",13),e.TgZ(74,"mat-label"),e._uU(75,"Total Do Item"),e.qZA(),e._UZ(76,"input",24),e.YNc(77,le,2,1,"mat-error",15),e.qZA(),e.qZA(),e.TgZ(78,"div",17),e.TgZ(79,"mat-form-field",13),e.TgZ(80,"mat-label"),e._uU(81,"Vlr Contabil"),e.qZA(),e._UZ(82,"input",25),e.YNc(83,se,2,1,"mat-error",15),e.qZA(),e.TgZ(84,"mat-form-field",13),e.TgZ(85,"mat-label"),e._uU(86,"Base Icms"),e.qZA(),e._UZ(87,"input",26),e.YNc(88,me,2,1,"mat-error",15),e.qZA(),e.TgZ(89,"mat-form-field",13),e.TgZ(90,"mat-label"),e._uU(91,"Perc. Icms"),e.qZA(),e._UZ(92,"input",27),e.YNc(93,ue,2,1,"mat-error",15),e.qZA(),e.TgZ(94,"mat-form-field",13),e.TgZ(95,"mat-label"),e._uU(96,"Valor Icms Icms"),e.qZA(),e._UZ(97,"input",28),e.YNc(98,ce,2,1,"mat-error",15),e.qZA(),e.qZA(),e.qZA()),2&a){let r,l,c,f,d,u,v,b,N,q,O,P,U;e.xp6(4),e.Oqu(t.labelCadastro),e.xp6(2),e.Q6J("ngIf",3!=t.idAcao),e.xp6(4),e.hij(" ",t.getLabelCancel()," "),e.xp6(1),e.Q6J("formGroup",t.formulario),e.xp6(9),e.Q6J("readonly",t.readOnly),e.xp6(5),e.Q6J("readonly",t.readOnly),e.xp6(9),e.Q6J("readonly",t.readOnly),e.xp6(1),e.Q6J("ngIf",(null==(r=t.formulario.get("dtemissao"))||null==r.errors?null:r.errors.ValidatorDate)&&t.touchedOrDirty("dtemissao")),e.xp6(4),e.Q6J("readonly",t.readOnly),e.xp6(1),e.Q6J("ngIf",(null==(l=t.formulario.get("dtlancamento"))||null==l.errors?null:l.errors.ValidatorDate)&&t.touchedOrDirty("dtlancamento")),e.xp6(5),e.Q6J("readonly",t.readOnly),e.xp6(1),e.Q6J("ngIf",(null==(c=t.formulario.get("nfe"))||null==c.errors?null:c.errors.ValidatorDate)&&t.touchedOrDirty("nfe")),e.xp6(4),e.Q6J("readonly",t.readOnly),e.xp6(1),e.Q6J("ngIf",(null==(f=t.formulario.get("serie"))||null==f.errors?null:f.errors.ValidatorStringLen)&&t.touchedOrDirty("serie")),e.xp6(4),e.Q6J("readonly",t.readOnly),e.xp6(1),e.Q6J("ngIf",(null==(d=t.formulario.get("item"))||null==d.errors?null:d.errors.ValidatorStringLen)&&t.touchedOrDirty("item")),e.xp6(4),e.Q6J("readonly",t.readOnly),e.xp6(1),e.Q6J("ngIf",(null==(u=t.formulario.get("chavee"))||null==u.errors?null:u.errors.ValidatorStringLen)&&t.touchedOrDirty("chavee")),e.xp6(5),e.Q6J("readonly",t.readOnly),e.xp6(1),e.Q6J("ngIf",(null==(v=t.formulario.get("qtd"))||null==v.errors?null:v.errors.ValidatorStringLen)&&t.touchedOrDirty("qtd")),e.xp6(4),e.Q6J("readonly",t.readOnly),e.xp6(1),e.Q6J("ngIf",(null==(b=t.formulario.get("punit"))||null==b.errors?null:b.errors.ValidatorStringLen)&&t.touchedOrDirty("punit")),e.xp6(4),e.Q6J("readonly",t.readOnly),e.xp6(1),e.Q6J("ngIf",(null==(N=t.formulario.get("totalitem"))||null==N.errors?null:N.errors.ValidatorStringLen)&&t.touchedOrDirty("totalitem")),e.xp6(5),e.Q6J("readonly",t.readOnly),e.xp6(1),e.Q6J("ngIf",(null==(q=t.formulario.get("vlrcontabil"))||null==q.errors?null:q.errors.ValidatorStringLen)&&t.touchedOrDirty("vlrcontabil")),e.xp6(4),e.Q6J("readonly",t.readOnly),e.xp6(1),e.Q6J("ngIf",(null==(O=t.formulario.get("baseicms"))||null==O.errors?null:O.errors.ValidatorStringLen)&&t.touchedOrDirty("baseicms")),e.xp6(4),e.Q6J("readonly",t.readOnly),e.xp6(1),e.Q6J("ngIf",(null==(P=t.formulario.get("percicms"))||null==P.errors?null:P.errors.ValidatorStringLen)&&t.touchedOrDirty("percicms")),e.xp6(4),e.Q6J("readonly",t.readOnly),e.xp6(1),e.Q6J("ngIf",(null==(U=t.formulario.get("vlrcicms"))||null==U.errors?null:U.errors.ValidatorStringLen)&&t.touchedOrDirty("vlrcicms"))}},directives:[V.Ye,_.hX,Z.O5,w.lW,z.Hw,m._Y,m.JL,m.sg,_.KE,E.Nt,m.Fj,m.JJ,m.u,Q.hx,_.TO],styles:[""]}),o})()}];let fe=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[h.Bz.forChild(pe)],h.Bz]}),o})();var de=i(9172),he=i(4466);let ge=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[Z.ez,fe,de.q,g.Cl,m.u5,m.UX,he.m,Q.yI.forChild()]]}),o})()}}]);