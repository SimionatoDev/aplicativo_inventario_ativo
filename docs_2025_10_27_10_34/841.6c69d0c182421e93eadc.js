"use strict";(self.webpackChunkinventario=self.webpackChunkinventario||[]).push([[841],{5841:(W,c,n)=>{n.r(c),n.d(c,{WebsocketModule:()=>M});var d=n(8583),r=n(4655),e=n(7716),u=n(2340);let v=(()=>{class t{constructor(){this.apiWS=u.N.wsURL,this.mensagemRecebidaEmitter=new e.vpe}connect(){this.socket=new WebSocket(`${this.apiWS}?iduser=16`),this.socket.onopen=()=>{console.log("Conectado ao servidor WebSocket")},this.socket.onmessage=o=>{const s=JSON.parse(o.data);this.mensagemRecebidaEmitter.emit(s),console.log("Gerado Evento..:",s)},this.socket.onclose=()=>{console.log("Conex\xe3o fechada")}}sendMessage(o){this.socket&&this.socket.readyState===WebSocket.OPEN?(this.socket.send(o),console.log("Mensagem enviada:",o)):alert("Conex\xe3o n\xe3o est\xe1 aberta. N\xe3o \xe9 poss\xedvel enviar a mensagem.")}closeConnection(){this.socket&&this.socket.close()}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var a=n(3679),g=n(2522),h=n(1095),f=n(1436),p=n(6627),m=n(8295),Z=n(9983);const T=[{path:"",redirectTo:"websocket",pathMatch:"full"},{path:"websocket",component:(()=>{class t{constructor(o,s){this.wsService=o,this.formBuilder=s,this.formulario=s.group({mensagem_enviada:[""],mensagem_recebida:[""]})}ngOnInit(){this.wsService.mensagemRecebidaEmitter.subscribe(o=>{this.formulario.patchValue({mensagem_recebida:o.message})}),this.wsService.connect(),this.setValues()}ngOnDestroy(){this.wsService.closeConnection()}sendMessage(){var o;const s=null===(o=this.formulario.get("mensagem_enviada"))||void 0===o?void 0:o.value;this.wsService.sendMessage(s)}disconnect(){this.wsService.closeConnection()}onHome(){}setValues(){this.formulario.setValue({mensagem_enviada:"",mensagem_recebida:""})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(v),e.Y36(a.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-teste"]],decls:24,vars:1,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Retorno","matTooltipPosition","above",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-1"],["appearance","outline",1,"col-max"],["matInput","","placeholder","Digite A Mensagem Para Ser Enviada Para O Servidor ","formControlName","mensagem_enviada"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click"],["matInput","","formControlName","mensagem_recebida"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"mat-toolbar"),e.TgZ(2,"span",1),e._uU(3,"Teste Mensagens WebSocket"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return s.onHome()}),e.TgZ(5,"mat-icon"),e._uU(6,"home"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"form",3),e.TgZ(8,"div",4),e.TgZ(9,"mat-form-field",5),e.TgZ(10,"mat-label"),e._uU(11,"Mensagem Para Ser Enviada"),e.qZA(),e.TgZ(12,"textarea",6),e._uU(13,"1600 Amphitheatre Pkwy"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",7),e.TgZ(15,"button",8),e.NdJ("click",function(){return s.sendMessage()}),e.TgZ(16,"mat-icon"),e._uU(17,"check"),e.qZA(),e._uU(18," Enviar Mensagem "),e.qZA(),e.qZA(),e.TgZ(19,"div",4),e.TgZ(20,"mat-form-field",5),e.TgZ(21,"mat-label"),e._uU(22,"Mensagem Para Recebida"),e.qZA(),e._UZ(23,"textarea",9),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(7),e.Q6J("formGroup",s.formulario))},directives:[g.Ye,h.lW,f.gM,p.Hw,a._Y,a.JL,a.sg,m.KE,m.hX,Z.Nt,a.Fj,a.JJ,a.u],styles:[""]}),t})()}];let b=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[r.Bz.forChild(T)],r.Bz]}),t})();var S=n(4307),k=n(9243),A=n(4466),C=n(8981);let M=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[d.ez,b,S.q,k.Cl,a.u5,a.UX,A.m,C.yI.forChild()]]}),t})()}}]);